tinymce.PluginManager.add("wpfeelink",function(a){var b=function(){var f=a.selection.getContent({format:"text"}),e=a.selection.getNode(),d=a.dom.getParent(e,"a[href]"),c=window.prompt("Enter a link:",d);if(!c){if(c===""){a.execCommand("unlink");}return;}if(!c.match(/^(https?:)\/\/?/ig)){c="http://"+c;}if(!f){if(d){a.dom.setAttribs(d,{href:c});}else{a.insertContent(a.dom.createHTML("a",{href:c},c));}}else{a.execCommand("mceInsertLink",false,{href:c});}};a.addButton("link",{icon:"link",tooltip:"Insert/edit link",shortcut:"Ctrl+K",onclick:b,stateSelector:"a[href]"});a.addShortcut("Ctrl+K","",b);});